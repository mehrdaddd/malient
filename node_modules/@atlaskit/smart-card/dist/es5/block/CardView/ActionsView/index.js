"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var React = require("react");
var button_1 = require("@atlaskit/button");
var more_1 = require("@atlaskit/icon/glyph/more");
var dropdown_menu_1 = require("@atlaskit/dropdown-menu");
var styled_1 = require("./styled");
var ActionsView = /** @class */ (function (_super) {
    tslib_1.__extends(ActionsView, _super);
    function ActionsView() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.createActionHandler = function (action) {
            return function (event) {
                /* prevent the parent link handler from opening a URL when clicked */
                if (event) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                var onAction = _this.props.onAction;
                if (onAction) {
                    onAction(action);
                }
            };
        };
        _this.handleOpenChange = function (_a) {
            var event = _a.event;
            /* prevent the parent link handler from opening a URL when clicked */
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
        };
        return _this;
    }
    ActionsView.prototype.render = function () {
        var _this = this;
        var _a = this.props.actions, actions = _a === void 0 ? [] : _a;
        // display a maximum of 3 actions
        var limitedActions = actions.slice(0, 3);
        if (limitedActions.length === 0) {
            return null;
        }
        var firstAction;
        var secondAction;
        var otherActions;
        if (limitedActions.length === 2) {
            firstAction = limitedActions[0];
            secondAction = limitedActions[1];
            otherActions = [];
        }
        else {
            firstAction = limitedActions[0];
            otherActions = limitedActions.slice(1);
        }
        return (React.createElement(styled_1.Wrapper, null,
            React.createElement(button_1.ButtonGroup, null,
                firstAction ? (React.createElement(button_1.default, { onClick: this.createActionHandler(firstAction) }, firstAction.text)) : null,
                secondAction ? (React.createElement(button_1.default, { onClick: this.createActionHandler(secondAction) }, secondAction.text)) : null,
                otherActions.length ? (React.createElement(dropdown_menu_1.default, { triggerType: "button", triggerButtonProps: {
                        appearance: 'subtle',
                        iconAfter: React.createElement(more_1.default, { label: "actions", size: "medium" }),
                    }, onOpenChange: this.handleOpenChange },
                    React.createElement(dropdown_menu_1.DropdownItemGroup, null, otherActions.map(function (action) { return (React.createElement(dropdown_menu_1.DropdownItem, { key: action.text, onClick: _this.createActionHandler(action) }, action.text)); })))) : null)));
    };
    return ActionsView;
}(React.Component));
exports.default = ActionsView;
//# sourceMappingURL=index.js.map