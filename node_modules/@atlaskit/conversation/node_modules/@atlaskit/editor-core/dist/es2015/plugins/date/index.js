import * as React from 'react';
import { date } from '@atlaskit/editor-common';
import WithPluginState from '../../ui/WithPluginState';
import { insertDate, selectElement } from './actions';
import createPlugin, { pluginKey } from './plugin';
import DatePicker from './ui/DatePicker';
var datePlugin = {
    nodes: function () {
        return [{ rank: 2400, name: 'date', node: date }];
    },
    pmPlugins: function () {
        return [
            {
                rank: 2410,
                plugin: function (_a) {
                    var schema = _a.schema, props = _a.props, dispatch = _a.dispatch, providerFactory = _a.providerFactory;
                    return createPlugin(dispatch, providerFactory);
                },
            },
        ];
    },
    contentComponent: function (_a) {
        var editorView = _a.editorView;
        var dispatch = editorView.dispatch;
        return (React.createElement(WithPluginState, { plugins: {
                dateState: pluginKey,
            }, render: function (_a) {
                var _b = _a.dateState, dateState = _b === void 0 ? {} : _b;
                return dateState.element ? (React.createElement(DatePicker, { element: dateState.element, onSelect: function (date) { return insertDate(date)(editorView.state, dispatch); }, onClickOutside: function () {
                        return selectElement(null)(editorView.state, dispatch);
                    } })) : null;
            } }));
    },
};
export default datePlugin;
//# sourceMappingURL=index.js.map