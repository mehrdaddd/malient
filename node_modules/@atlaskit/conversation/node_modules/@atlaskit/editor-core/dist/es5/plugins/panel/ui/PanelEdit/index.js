"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var React = require("react");
var react_1 = require("react");
var success_1 = require("@atlaskit/icon/glyph/editor/success");
var info_1 = require("@atlaskit/icon/glyph/editor/info");
var note_1 = require("@atlaskit/icon/glyph/editor/note");
var remove_1 = require("@atlaskit/icon/glyph/editor/remove");
var warning_1 = require("@atlaskit/icon/glyph/editor/warning");
var error_1 = require("@atlaskit/icon/glyph/editor/error");
var ToolbarButton_1 = require("../../../../ui/ToolbarButton");
var Separator_1 = require("../../../../ui/Separator");
var FloatingToolbar_1 = require("../../../../ui/FloatingToolbar");
var main_1 = require("../../pm-plugins/main");
var icons = {
    info: info_1.default,
    note: note_1.default,
    success: success_1.default,
    warning: warning_1.default,
    error: error_1.default,
};
var PanelEdit = /** @class */ (function (_super) {
    tslib_1.__extends(PanelEdit, _super);
    function PanelEdit(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { toolbarVisible: false };
        _this.handlePluginStateChange = function (pluginState) {
            var target = pluginState.element, activePanelType = pluginState.activePanelType, toolbarVisible = pluginState.toolbarVisible;
            _this.setState({
                toolbarVisible: toolbarVisible,
                target: target,
                activePanelType: activePanelType,
            });
        };
        _this.handleSelectPanelType = function (panelType, event) {
            var editorView = _this.props.editorView;
            _this.props.pluginState.changePanelType(editorView, panelType);
        };
        _this.handleRemovePanel = function () {
            var editorView = _this.props.editorView;
            _this.props.pluginState.removePanel(editorView);
        };
        return _this;
    }
    PanelEdit.prototype.componentDidMount = function () {
        this.props.pluginState.subscribe(this.handlePluginStateChange);
    };
    PanelEdit.prototype.componentWillUnmount = function () {
        this.props.pluginState.unsubscribe(this.handlePluginStateChange);
    };
    PanelEdit.prototype.render = function () {
        var _this = this;
        var _a = this.state, target = _a.target, activePanelType = _a.activePanelType, toolbarVisible = _a.toolbarVisible;
        if (toolbarVisible) {
            return (React.createElement(FloatingToolbar_1.default, { target: target, offset: [0, 3], fitHeight: 32 },
                main_1.availablePanelType.map(function (panelType, index) {
                    // tslint:disable-next-line:variable-name
                    var Icon = icons[panelType.panelType];
                    return (React.createElement(ToolbarButton_1.default, { key: index, selected: activePanelType === panelType.panelType, onClick: _this.handleSelectPanelType.bind(_this, panelType), iconBefore: React.createElement(Icon, { label: "Change panel type to " + panelType.panelType }) }));
                }),
                React.createElement(Separator_1.default, null),
                React.createElement(ToolbarButton_1.default, { onClick: this.handleRemovePanel, iconBefore: React.createElement(remove_1.default, { label: "Remove panel type" }) })));
        }
        else {
            return null;
        }
    };
    return PanelEdit;
}(react_1.PureComponent));
exports.default = PanelEdit;
//# sourceMappingURL=index.js.map