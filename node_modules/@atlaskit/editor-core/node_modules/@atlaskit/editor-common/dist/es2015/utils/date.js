import * as format from 'date-fns/format';
import * as isBefore from 'date-fns/is_before';
import * as parseDate from 'date-fns/parse';
export { parseDate };
var ISO_FORMAT = 'YYYY-MM-DD';
var DEFAULT_FORMAT = 'DD MMM YYYY';
export var timestampToDate = function (timestamp) {
    var date = new Date(parseDate(Number(timestamp)));
    var day = date.getDate();
    var month = date.getMonth() + 1;
    var year = date.getFullYear();
    return { day: day, month: month, year: year };
};
// example: "23 Jan 2018"
export var timestampToString = function (timestamp, pattern) {
    if (pattern === void 0) { pattern = DEFAULT_FORMAT; }
    // @see https://github.com/date-fns/date-fns/issues/489
    return format(parseDate(Number(timestamp)), pattern);
};
// example: "2018-01-23"
export var timestampToIso = function (timestamp) {
    return timestampToString(timestamp, ISO_FORMAT);
};
export var isPastDate = function (timestamp) {
    var curISO = timestampToIso(new Date().valueOf());
    var givenISO = timestampToIso(timestamp);
    return isBefore(givenISO, curISO);
};
export var timestampToTaskContext = function (timestamp) {
    var curDate = timestampToDate(new Date().valueOf());
    var givenDate = timestampToDate(timestamp);
    var distance = Math.abs(givenDate.day - curDate.day);
    var pattern = '';
    if (givenDate.year !== curDate.year || isPastDate(timestamp)) {
        pattern = 'DD MMM YYYY';
    }
    else if (givenDate.month !== curDate.month || distance >= 7) {
        pattern = 'ddd, DD MMM';
    }
    else if (distance > 1 && distance < 7) {
        pattern = 'dddd';
    }
    else if (distance === 1) {
        return 'Tomorrow';
    }
    else {
        return 'Today';
    }
    return timestampToString(timestamp, pattern);
};
//# sourceMappingURL=date.js.map