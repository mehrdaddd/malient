"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var React = require("react");
var styled_components_1 = require("styled-components");
var util_shared_styles_1 = require("@atlaskit/util-shared-styles");
var editor_common_1 = require("@atlaskit/editor-common");
var actions_1 = require("../actions");
var styles_1 = require("../../../styles");
var Overlay = styled_components_1.default.div(templateObject_1 || (templateObject_1 = tslib_1.__makeTemplateObject(["\n  background: transparent;\n  border-radius: ", ";\n  box-sizing: border-box;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n"], ["\n  background: transparent;\n  border-radius: ", ";\n  box-sizing: border-box;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n"])), util_shared_styles_1.akBorderRadius);
var DateNode = styled_components_1.default.span(templateObject_2 || (templateObject_2 = tslib_1.__makeTemplateObject(["\n  ", ";\n\n  background: ", ";\n  border-radius: ", ";\n  color: ", ";\n  padding: 2px 4px;\n  margin: 0 1px;\n  position: relative;\n  cursor: pointer;\n  transition: background 0.3s;\n  white-space: nowrap;\n\n  &:hover {\n    background: ", ";\n  }\n  .ProseMirror-selectednode & > div {\n    border: 2px solid ", ";\n  }\n  &.past-due {\n    background: ", ";\n    color: ", ";\n\n    &:hover {\n      background: ", ";\n    }\n  }\n"], ["\n  ", ";\n\n  background: ", ";\n  border-radius: ", ";\n  color: ", ";\n  padding: 2px 4px;\n  margin: 0 1px;\n  position: relative;\n  cursor: pointer;\n  transition: background 0.3s;\n  white-space: nowrap;\n\n  &:hover {\n    background: ", ";\n  }\n  .ProseMirror-selectednode & > div {\n    border: 2px solid ", ";\n  }\n  &.past-due {\n    background: ", ";\n    color: ", ";\n\n    &:hover {\n      background: ", ";\n    }\n  }\n"])), styles_1.defaultEditorFontStyles, util_shared_styles_1.akColorN30A, util_shared_styles_1.akBorderRadius, util_shared_styles_1.akColorN800, util_shared_styles_1.akColorN40, util_shared_styles_1.akColorB200, util_shared_styles_1.akColorR50, util_shared_styles_1.akColorR500, util_shared_styles_1.akColorR75);
var DateNodeView = /** @class */ (function (_super) {
    tslib_1.__extends(DateNodeView, _super);
    function DateNodeView() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.handleClick = function (event) {
            var _a = _this.props.view, state = _a.state, dispatch = _a.dispatch;
            actions_1.selectElement(event.currentTarget.parentElement)(state, dispatch);
        };
        return _this;
    }
    DateNodeView.prototype.render = function () {
        var timestamp = this.props.node.attrs.timestamp;
        var _a = this.props.view.state, schema = _a.schema, selection = _a.selection;
        var withinTask = selection.$from.parent.type === schema.nodes.taskItem;
        return (React.createElement(DateNode, { onClick: this.handleClick, className: withinTask && editor_common_1.isPastDate(timestamp) ? 'past-due' : '' },
            React.createElement(Overlay, null),
            withinTask
                ? editor_common_1.timestampToTaskContext(timestamp)
                : editor_common_1.timestampToString(timestamp)));
    };
    return DateNodeView;
}(React.Component));
exports.default = DateNodeView;
var templateObject_1, templateObject_2;
//# sourceMappingURL=date.js.map