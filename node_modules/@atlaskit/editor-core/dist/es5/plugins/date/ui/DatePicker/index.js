"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var React = require("react");
var editor_common_1 = require("@atlaskit/editor-common");
var calendar_1 = require("@atlaskit/calendar");
var util_shared_styles_1 = require("@atlaskit/util-shared-styles");
var with_outer_listeners_1 = require("../../../../ui/with-outer-listeners");
var PopupWithListeners = with_outer_listeners_1.default(editor_common_1.Popup);
var calendarStyle = {
    padding: util_shared_styles_1.akBorderRadius,
    borderRadius: util_shared_styles_1.akBorderRadius,
    boxShadow: "0 4px 8px -2px " + util_shared_styles_1.akColorN60A + ", 0 0 1px " + util_shared_styles_1.akColorN60A,
};
var DatePicker = /** @class */ (function (_super) {
    tslib_1.__extends(DatePicker, _super);
    function DatePicker(props) {
        var _this = _super.call(this, props) || this;
        _this.handleChange = function (_a) {
            var day = _a.day, month = _a.month, year = _a.year;
            _this.setState({
                day: day,
                month: month,
                year: year,
            });
        };
        _this.handleRef = function (ref) {
            if (ref) {
                ref.focus();
            }
        };
        var timestamp = props.element.getAttribute('timestamp');
        if (timestamp) {
            var _a = editor_common_1.timestampToDate(timestamp), day = _a.day, month = _a.month, year = _a.year;
            _this.state = {
                selected: [editor_common_1.timestampToIso(timestamp)],
                day: day,
                month: month,
                year: year,
            };
        }
        return _this;
    }
    DatePicker.prototype.render = function () {
        var _a = this.props, element = _a.element, onClickOutside = _a.onClickOutside, onSelect = _a.onSelect;
        var timestamp = element.getAttribute('timestamp');
        if (!timestamp) {
            return null;
        }
        return (React.createElement(PopupWithListeners, { target: element, offset: [0, 8], handleClickOutside: onClickOutside, handleEscapeKeydown: onClickOutside },
            React.createElement(calendar_1.default, tslib_1.__assign({ onChange: this.handleChange, onSelect: onSelect }, this.state, { ref: this.handleRef, innerProps: { style: calendarStyle } }))));
    };
    return DatePicker;
}(React.Component));
exports.default = DatePicker;
//# sourceMappingURL=index.js.map