import * as tslib_1 from "tslib";
import * as React from 'react';
import { Popup, timestampToDate, timestampToIso, } from '@atlaskit/editor-common';
import Calendar from '@atlaskit/calendar';
import { akColorN60A, akBorderRadius } from '@atlaskit/util-shared-styles';
import withOuterListeners from '../../../../ui/with-outer-listeners';
var PopupWithListeners = withOuterListeners(Popup);
var calendarStyle = {
    padding: akBorderRadius,
    borderRadius: akBorderRadius,
    boxShadow: "0 4px 8px -2px " + akColorN60A + ", 0 0 1px " + akColorN60A,
};
var DatePicker = /** @class */ (function (_super) {
    tslib_1.__extends(DatePicker, _super);
    function DatePicker(props) {
        var _this = _super.call(this, props) || this;
        _this.handleChange = function (_a) {
            var day = _a.day, month = _a.month, year = _a.year;
            _this.setState({
                day: day,
                month: month,
                year: year,
            });
        };
        _this.handleRef = function (ref) {
            if (ref) {
                ref.focus();
            }
        };
        var timestamp = props.element.getAttribute('timestamp');
        if (timestamp) {
            var _a = timestampToDate(timestamp), day = _a.day, month = _a.month, year = _a.year;
            _this.state = {
                selected: [timestampToIso(timestamp)],
                day: day,
                month: month,
                year: year,
            };
        }
        return _this;
    }
    DatePicker.prototype.render = function () {
        var _a = this.props, element = _a.element, onClickOutside = _a.onClickOutside, onSelect = _a.onSelect;
        var timestamp = element.getAttribute('timestamp');
        if (!timestamp) {
            return null;
        }
        return (React.createElement(PopupWithListeners, { target: element, offset: [0, 8], handleClickOutside: onClickOutside, handleEscapeKeydown: onClickOutside },
            React.createElement(Calendar, tslib_1.__assign({ onChange: this.handleChange, onSelect: onSelect }, this.state, { ref: this.handleRef, innerProps: { style: calendarStyle } }))));
    };
    return DatePicker;
}(React.Component));
export default DatePicker;
//# sourceMappingURL=index.js.map