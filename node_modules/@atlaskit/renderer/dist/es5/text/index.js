"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var editor_common_1 = require("@atlaskit/editor-common");
var utils_1 = require("./utils");
var serializeTree = function (node) {
    if (node.content) {
        return node.content
            .reduce(function (arr, childNode) {
            if (!childNode.text && !childNode.content) {
                return arr;
            }
            arr.push((node.text || '') + serializeTree(childNode));
            return arr;
        }, [])
            .join('\n');
    }
    return node.text;
};
var TextSerializer = /** @class */ (function () {
    function TextSerializer(schema) {
        this.schema = schema;
        this.schema = schema;
    }
    TextSerializer.prototype.serializeFragment = function (fragment) {
        var tree = { content: utils_1.reduceTree(fragment, this.schema) };
        return serializeTree(tree);
    };
    TextSerializer.fromSchema = function (schema) {
        if (schema === void 0) { schema = editor_common_1.defaultSchema; }
        return new TextSerializer(schema);
    };
    return TextSerializer;
}());
exports.default = TextSerializer;
//# sourceMappingURL=index.js.map