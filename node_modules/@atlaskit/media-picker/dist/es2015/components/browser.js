import * as tslib_1 from "tslib";
import { LocalUploadComponent } from './localUpload';
import { MPBrowserLoaded } from '../outer/analytics/events';
var Browser = /** @class */ (function (_super) {
    tslib_1.__extends(Browser, _super);
    function Browser(analyticsContext, context, browserConfig) {
        if (browserConfig === void 0) { browserConfig = { uploadParams: {} }; }
        var _this = _super.call(this, analyticsContext, context, browserConfig) || this;
        _this.browseElement = document.createElement('input');
        _this.browseElement.setAttribute('type', 'file');
        _this.browseElement.style.display = 'none';
        if (browserConfig.multiple) {
            _this.browseElement.setAttribute('multiple', '');
        }
        if (browserConfig.fileExtensions) {
            _this.browseElement.setAttribute('accept', browserConfig.fileExtensions.join(','));
        }
        // IE11 hack - click will not execute if input has no parent
        // WebDriver hack - click will not execute if input isn't in the document
        document.body.appendChild(_this.browseElement);
        _this.uploadService.addBrowse(_this.browseElement);
        _this.analyticsContext.trackEvent(new MPBrowserLoaded());
        return _this;
    }
    Browser.prototype.browse = function () {
        this.browseElement.click();
    };
    Browser.prototype.teardown = function () {
        this.uploadService.removeBrowse();
        var parentNode = this.browseElement.parentNode;
        if (parentNode) {
            parentNode.removeChild(this.browseElement);
        }
    };
    return Browser;
}(LocalUploadComponent));
export { Browser };
//# sourceMappingURL=browser.js.map