"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fileProvider_1 = require("./fileProvider");
var linkProvider_1 = require("./linkProvider");
var pool_1 = require("./util/pool");
var observableFromObservablePool_1 = require("./util/observableFromObservablePool");
var MediaItemProvider = /** @class */ (function () {
    function MediaItemProvider() {
    }
    MediaItemProvider.fromMediaApi = function (config, fileItemCache, mediaItemType, id, collection) {
        switch (mediaItemType) {
            case 'file':
                return fileProvider_1.FileProvider.fromMediaApi(config, fileItemCache, id, collection, fileProvider_1.FILE_PROVIDER_RETRY_INTERVAL);
            case 'link':
                return linkProvider_1.LinkProvider.fromMediaApi(config, id, collection);
            default:
                throw new Error('invalid media type ' + mediaItemType);
        }
    };
    MediaItemProvider.fromPool = function (pool, config, fileItemCache, mediaItemType, id, collection) {
        return {
            observable: function () {
                var poolId = [mediaItemType, id, collection].join('-');
                return observableFromObservablePool_1.observableFromObservablePool(pool, poolId, function () {
                    return MediaItemProvider.fromMediaApi(config, fileItemCache, mediaItemType, id, collection).observable();
                });
            },
        };
    };
    MediaItemProvider.createPool = function () {
        return new pool_1.Pool();
    };
    return MediaItemProvider;
}());
exports.MediaItemProvider = MediaItemProvider;
//# sourceMappingURL=mediaItemProvider.js.map