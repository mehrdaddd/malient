import { Observable } from 'rxjs/Observable';
export function mediaCollectionProviderFromPool(pool, poolId, createProvider) {
    return pool.acquire(poolId, function () {
        var provider = createProvider();
        var oldObservableFn = provider.observable;
        // wrap the observable to release the provider from the pool when we unsubscribe
        provider.observable = function () {
            return new Observable(function (observer) {
                var observable = oldObservableFn.bind(provider)();
                var subscription = observable.subscribe(observer);
                return function () {
                    subscription.unsubscribe();
                    pool.release(poolId);
                };
            });
        };
        return provider;
    });
}
//# sourceMappingURL=mediaCollectionProviderFromPool.js.map