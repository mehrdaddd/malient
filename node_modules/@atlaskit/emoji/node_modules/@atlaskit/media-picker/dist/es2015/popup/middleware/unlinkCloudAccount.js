import { REQUEST_UNLINK_CLOUD_ACCOUNT, changeService, unlinkCloudAccount, } from '../actions';
export default function (fetcher) { return function (store) { return function (next) { return function (action) {
    if (action.type === REQUEST_UNLINK_CLOUD_ACCOUNT) {
        var _a = store.getState(), apiUrl_1 = _a.apiUrl, userAuthProvider = _a.userAuthProvider;
        userAuthProvider()
            .then(function (auth) { return fetcher.unlinkCloudAccount(apiUrl_1, auth, action.account.id); })
            .then(function () {
            store.dispatch(unlinkCloudAccount(action.account));
            store.dispatch(changeService(action.account.name));
        });
    }
    return next(action);
}; }; }; };
//# sourceMappingURL=unlinkCloudAccount.js.map