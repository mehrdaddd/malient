import { updateServiceList } from '../actions';
import { GET_CONNECTED_REMOTE_ACCOUNTS, } from '../actions/getConnectedRemoteAccounts';
var isGetConnectedRemoteAccountsAction = function (action) {
    return action.type === GET_CONNECTED_REMOTE_ACCOUNTS;
};
export var getConnectedRemoteAccounts = function (fetcher) { return function (store) { return function (next) { return function (action) {
    if (isGetConnectedRemoteAccountsAction(action)) {
        var _a = store.getState(), apiUrl_1 = _a.apiUrl, userAuthProvider = _a.userAuthProvider;
        userAuthProvider()
            .then(function (auth) { return fetcher.getServiceList(apiUrl_1, auth); })
            .then(function (accounts) { return store.dispatch(updateServiceList(accounts)); });
    }
    return next(action);
}; }; }; };
//# sourceMappingURL=getConnectedRemoteAccounts.js.map