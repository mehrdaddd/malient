webpackJsonp([1],{

/***/ 4087:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__ = __webpack_require__(694);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_media_common__ = __webpack_require__(317);\n\n\n\nvar PickerFacade = /** @class */ (function () {\n    function PickerFacade(pickerType, config, pickerConfig) {\n        var _this = this;\n        this.onStartListeners = [];\n        this.onDragListeners = [];\n        this.handleUploadsStart = function (event) {\n            var files = event.files;\n            var states = files.map(function (file) {\n                var state = _this.stateManager.newState(file, 'uploading');\n                _this.stateManager.updateState(state.id, state);\n                return state;\n            });\n            _this.onStartListeners.forEach(function (cb) { return cb.call(cb, states); });\n        };\n        this.handleUploadStatusUpdate = function (event) {\n            var file = event.file, progress = event.progress;\n            var tempId = _this.generateTempId(file.id);\n            var currentState = _this.stateManager.getState(tempId);\n            var currentStatus = (currentState && currentState.status) || 'unknown';\n            var state = _this.stateManager.newState(file, currentStatus === 'unknown' || currentStatus === 'preview'\n                ? 'uploading'\n                : currentStatus);\n            state.progress = progress && progress.portion;\n            _this.stateManager.updateState(state.id, state);\n        };\n        this.handleUploadProcessing = function (event) {\n            var file = event.file;\n            var state = _this.stateManager.newState(file, 'processing', file.publicId);\n            _this.stateManager.updateState(state.id, state);\n        };\n        this.handleUploadError = function (_a) {\n            var error = _a.error;\n            if (!error || !error.fileId) {\n                var err = new Error(\"Media: unknown upload-error received from Media Picker: \" + (error &&\n                    error.name));\n                _this.errorReporter.captureException(err);\n                return;\n            }\n            var tempId = _this.generateTempId(error.fileId);\n            _this.stateManager.updateState(tempId, {\n                id: tempId,\n                status: 'error',\n                error: error && { description: error.description, name: error.name },\n            });\n        };\n        this.handleUploadEnd = function (event) {\n            var file = event.file;\n            var state = _this.stateManager.newState(file, 'ready', file.publicId);\n            state.progress = 1;\n            state.ready = true;\n            _this.stateManager.updateState(state.id, state);\n        };\n        this.handleUploadPreviewUpdate = function (event) {\n            var file = event.file, preview = event.preview;\n            var state = _this.stateManager.newState(file, 'preview');\n            state.thumbnail = preview;\n            state.preview = true;\n            // Add timestamp to image file names on paste @see ED-3584\n            if (_this.pickerType === 'clipboard' && Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"u\" /* isImage */])(file.type)) {\n                state.fileName = Object(__WEBPACK_IMPORTED_MODULE_2__utils_media_common__[\"a\" /* appendTimestamp */])(file.name, file.creationDate);\n            }\n            _this.stateManager.updateState(state.id, state);\n        };\n        this.handleDragEnter = function () {\n            _this.onDragListeners.forEach(function (cb) { return cb.call(cb, 'enter'); });\n        };\n        this.handleDragLeave = function () {\n            _this.onDragListeners.forEach(function (cb) { return cb.call(cb, 'leave'); });\n        };\n        this.pickerType = pickerType;\n        this.errorReporter = config.errorReporter;\n        this.stateManager = config.stateManager;\n        var picker;\n        if (pickerType === 'customMediaPicker') {\n            picker = this.picker = pickerConfig;\n        }\n        else {\n            picker = this.picker = Object(__WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"e\" /* MediaPicker */])(pickerType, config.context, pickerConfig);\n        }\n        picker.on('uploads-start', this.handleUploadsStart);\n        picker.on('upload-preview-update', this.handleUploadPreviewUpdate);\n        picker.on('upload-processing', this.handleUploadProcessing);\n        picker.on('upload-status-update', this.handleUploadStatusUpdate);\n        picker.on('upload-error', this.handleUploadError);\n        picker.on('upload-end', this.handleUploadEnd);\n        if (picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"d\" /* Dropzone */]) {\n            picker.on('drag-enter', this.handleDragEnter);\n            picker.on('drag-leave', this.handleDragLeave);\n        }\n        if (picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"d\" /* Dropzone */] || picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"c\" /* Clipboard */]) {\n            picker.activate();\n        }\n    }\n    Object.defineProperty(PickerFacade.prototype, \"type\", {\n        get: function () {\n            return this.pickerType;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PickerFacade.prototype.destroy = function () {\n        var picker = this.picker;\n        if (!picker) {\n            return;\n        }\n        picker.removeAllListeners('uploads-start');\n        picker.removeAllListeners('upload-preview-update');\n        picker.removeAllListeners('upload-status-update');\n        picker.removeAllListeners('upload-processing');\n        picker.removeAllListeners('upload-error');\n        picker.removeAllListeners('upload-end');\n        if (picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"d\" /* Dropzone */]) {\n            picker.removeAllListeners('drag-enter');\n            picker.removeAllListeners('drag-leave');\n        }\n        this.onStartListeners = [];\n        this.onDragListeners = [];\n        try {\n            if (picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"d\" /* Dropzone */] || picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"c\" /* Clipboard */]) {\n                picker.deactivate();\n            }\n            if (picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"f\" /* Popup */] || picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"b\" /* Browser */]) {\n                picker.teardown();\n            }\n        }\n        catch (ex) {\n            this.errorReporter.captureException(ex);\n        }\n    };\n    PickerFacade.prototype.setUploadParams = function (params) {\n        this.picker.setUploadParams(params);\n    };\n    PickerFacade.prototype.onClose = function (cb) {\n        var picker = this.picker;\n        if (picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"f\" /* Popup */]) {\n            picker.on('closed', cb);\n            return function () { return picker.off('closed', cb); };\n        }\n        return function () { };\n    };\n    PickerFacade.prototype.activate = function () {\n        var picker = this.picker;\n        if (picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"d\" /* Dropzone */] || picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"c\" /* Clipboard */]) {\n            picker.activate();\n        }\n    };\n    PickerFacade.prototype.deactivate = function () {\n        var picker = this.picker;\n        if (picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"d\" /* Dropzone */] || picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"c\" /* Clipboard */]) {\n            picker.deactivate();\n        }\n    };\n    PickerFacade.prototype.show = function () {\n        if (this.picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"f\" /* Popup */]) {\n            try {\n                this.picker.show();\n            }\n            catch (ex) {\n                this.errorReporter.captureException(ex);\n            }\n        }\n        else if (this.picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"b\" /* Browser */]) {\n            this.picker.browse();\n        }\n    };\n    PickerFacade.prototype.hide = function () {\n        if (this.picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"f\" /* Popup */]) {\n            this.picker.hide();\n        }\n    };\n    PickerFacade.prototype.cancel = function (tempId) {\n        if (this.picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"f\" /* Popup */]) {\n            var state = this.stateManager.getState(tempId);\n            if (!state || state.status === 'cancelled') {\n                return;\n            }\n            try {\n                this.picker.cancel(tempId);\n            }\n            catch (e) {\n                // We're deliberately consuming a known Media Picker exception, as it seems that\n                // the picker has problems cancelling uploads before the popup picker has been shown\n                // TODO: remove after fixing https://jira.atlassian.com/browse/FIL-4161\n                if (!/((popupIframe|cancelUpload).*?undefined)|(undefined.*?(popupIframe|cancelUpload))/.test(\"\" + e)) {\n                    throw e;\n                }\n            }\n            this.stateManager.updateState(tempId, {\n                id: tempId,\n                status: 'cancelled',\n            });\n        }\n    };\n    PickerFacade.prototype.upload = function (url, fileName) {\n        if (this.picker instanceof __WEBPACK_IMPORTED_MODULE_0__atlaskit_media_picker__[\"a\" /* BinaryUploader */]) {\n            this.picker.upload(url, fileName);\n        }\n    };\n    PickerFacade.prototype.onNewMedia = function (cb) {\n        this.onStartListeners.push(cb);\n    };\n    PickerFacade.prototype.onDrag = function (cb) {\n        this.onDragListeners.push(cb);\n    };\n    PickerFacade.prototype.generateTempId = function (id) {\n        return \"temporary:\" + id;\n    };\n    return PickerFacade;\n}());\n/* harmony default export */ __webpack_exports__[\"default\"] = (PickerFacade);\n//# sourceMappingURL=picker-facade.js.map\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF0bGFza2l0L2NvbnZlcnNhdGlvbi9ub2RlX21vZHVsZXMvQGF0bGFza2l0L2VkaXRvci1jb3JlL2Rpc3QvZXMyMDE1L3BsdWdpbnMvbWVkaWEvcGlja2VyLWZhY2FkZS5qcz9kYzU4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBNEU7QUFDMUQ7QUFDUTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLDBEQUEwRCw0QkFBNEIsRUFBRTtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG1EQUFtRDtBQUNwRixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCw2QkFBNkIsRUFBRTtBQUN4RjtBQUNBO0FBQ0EseURBQXlELDZCQUE2QixFQUFFO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGlDQUFpQztBQUNqRTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBIiwiZmlsZSI6IjQwODcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNZWRpYVBpY2tlciwgUG9wdXAsIEJyb3dzZXIsIERyb3B6b25lLCBDbGlwYm9hcmQsIEJpbmFyeVVwbG9hZGVyLCB9IGZyb20gJ0BhdGxhc2tpdC9tZWRpYS1waWNrZXInO1xuaW1wb3J0IHsgaXNJbWFnZSB9IGZyb20gJy4uLy4uL3V0aWxzJztcbmltcG9ydCB7IGFwcGVuZFRpbWVzdGFtcCB9IGZyb20gJy4vdXRpbHMvbWVkaWEtY29tbW9uJztcbnZhciBQaWNrZXJGYWNhZGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUGlja2VyRmFjYWRlKHBpY2tlclR5cGUsIGNvbmZpZywgcGlja2VyQ29uZmlnKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMub25TdGFydExpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLm9uRHJhZ0xpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLmhhbmRsZVVwbG9hZHNTdGFydCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGZpbGVzID0gZXZlbnQuZmlsZXM7XG4gICAgICAgICAgICB2YXIgc3RhdGVzID0gZmlsZXMubWFwKGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gX3RoaXMuc3RhdGVNYW5hZ2VyLm5ld1N0YXRlKGZpbGUsICd1cGxvYWRpbmcnKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZU1hbmFnZXIudXBkYXRlU3RhdGUoc3RhdGUuaWQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzLm9uU3RhcnRMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsgcmV0dXJuIGNiLmNhbGwoY2IsIHN0YXRlcyk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZVVwbG9hZFN0YXR1c1VwZGF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGZpbGUgPSBldmVudC5maWxlLCBwcm9ncmVzcyA9IGV2ZW50LnByb2dyZXNzO1xuICAgICAgICAgICAgdmFyIHRlbXBJZCA9IF90aGlzLmdlbmVyYXRlVGVtcElkKGZpbGUuaWQpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IF90aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSh0ZW1wSWQpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0dXMgPSAoY3VycmVudFN0YXRlICYmIGN1cnJlbnRTdGF0ZS5zdGF0dXMpIHx8ICd1bmtub3duJztcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IF90aGlzLnN0YXRlTWFuYWdlci5uZXdTdGF0ZShmaWxlLCBjdXJyZW50U3RhdHVzID09PSAndW5rbm93bicgfHwgY3VycmVudFN0YXR1cyA9PT0gJ3ByZXZpZXcnXG4gICAgICAgICAgICAgICAgPyAndXBsb2FkaW5nJ1xuICAgICAgICAgICAgICAgIDogY3VycmVudFN0YXR1cyk7XG4gICAgICAgICAgICBzdGF0ZS5wcm9ncmVzcyA9IHByb2dyZXNzICYmIHByb2dyZXNzLnBvcnRpb247XG4gICAgICAgICAgICBfdGhpcy5zdGF0ZU1hbmFnZXIudXBkYXRlU3RhdGUoc3RhdGUuaWQsIHN0YXRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVVcGxvYWRQcm9jZXNzaW5nID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgZmlsZSA9IGV2ZW50LmZpbGU7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBfdGhpcy5zdGF0ZU1hbmFnZXIubmV3U3RhdGUoZmlsZSwgJ3Byb2Nlc3NpbmcnLCBmaWxlLnB1YmxpY0lkKTtcbiAgICAgICAgICAgIF90aGlzLnN0YXRlTWFuYWdlci51cGRhdGVTdGF0ZShzdGF0ZS5pZCwgc3RhdGUpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZVVwbG9hZEVycm9yID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBfYS5lcnJvcjtcbiAgICAgICAgICAgIGlmICghZXJyb3IgfHwgIWVycm9yLmZpbGVJZCkge1xuICAgICAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoXCJNZWRpYTogdW5rbm93biB1cGxvYWQtZXJyb3IgcmVjZWl2ZWQgZnJvbSBNZWRpYSBQaWNrZXI6IFwiICsgKGVycm9yICYmXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLm5hbWUpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvclJlcG9ydGVyLmNhcHR1cmVFeGNlcHRpb24oZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGVtcElkID0gX3RoaXMuZ2VuZXJhdGVUZW1wSWQoZXJyb3IuZmlsZUlkKTtcbiAgICAgICAgICAgIF90aGlzLnN0YXRlTWFuYWdlci51cGRhdGVTdGF0ZSh0ZW1wSWQsIHtcbiAgICAgICAgICAgICAgICBpZDogdGVtcElkLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgJiYgeyBkZXNjcmlwdGlvbjogZXJyb3IuZGVzY3JpcHRpb24sIG5hbWU6IGVycm9yLm5hbWUgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZVVwbG9hZEVuZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGZpbGUgPSBldmVudC5maWxlO1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gX3RoaXMuc3RhdGVNYW5hZ2VyLm5ld1N0YXRlKGZpbGUsICdyZWFkeScsIGZpbGUucHVibGljSWQpO1xuICAgICAgICAgICAgc3RhdGUucHJvZ3Jlc3MgPSAxO1xuICAgICAgICAgICAgc3RhdGUucmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgX3RoaXMuc3RhdGVNYW5hZ2VyLnVwZGF0ZVN0YXRlKHN0YXRlLmlkLCBzdGF0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlVXBsb2FkUHJldmlld1VwZGF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGZpbGUgPSBldmVudC5maWxlLCBwcmV2aWV3ID0gZXZlbnQucHJldmlldztcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IF90aGlzLnN0YXRlTWFuYWdlci5uZXdTdGF0ZShmaWxlLCAncHJldmlldycpO1xuICAgICAgICAgICAgc3RhdGUudGh1bWJuYWlsID0gcHJldmlldztcbiAgICAgICAgICAgIHN0YXRlLnByZXZpZXcgPSB0cnVlO1xuICAgICAgICAgICAgLy8gQWRkIHRpbWVzdGFtcCB0byBpbWFnZSBmaWxlIG5hbWVzIG9uIHBhc3RlIEBzZWUgRUQtMzU4NFxuICAgICAgICAgICAgaWYgKF90aGlzLnBpY2tlclR5cGUgPT09ICdjbGlwYm9hcmQnICYmIGlzSW1hZ2UoZmlsZS50eXBlKSkge1xuICAgICAgICAgICAgICAgIHN0YXRlLmZpbGVOYW1lID0gYXBwZW5kVGltZXN0YW1wKGZpbGUubmFtZSwgZmlsZS5jcmVhdGlvbkRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuc3RhdGVNYW5hZ2VyLnVwZGF0ZVN0YXRlKHN0YXRlLmlkLCBzdGF0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlRHJhZ0VudGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMub25EcmFnTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IHJldHVybiBjYi5jYWxsKGNiLCAnZW50ZXInKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlRHJhZ0xlYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMub25EcmFnTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IHJldHVybiBjYi5jYWxsKGNiLCAnbGVhdmUnKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucGlja2VyVHlwZSA9IHBpY2tlclR5cGU7XG4gICAgICAgIHRoaXMuZXJyb3JSZXBvcnRlciA9IGNvbmZpZy5lcnJvclJlcG9ydGVyO1xuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlciA9IGNvbmZpZy5zdGF0ZU1hbmFnZXI7XG4gICAgICAgIHZhciBwaWNrZXI7XG4gICAgICAgIGlmIChwaWNrZXJUeXBlID09PSAnY3VzdG9tTWVkaWFQaWNrZXInKSB7XG4gICAgICAgICAgICBwaWNrZXIgPSB0aGlzLnBpY2tlciA9IHBpY2tlckNvbmZpZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBpY2tlciA9IHRoaXMucGlja2VyID0gTWVkaWFQaWNrZXIocGlja2VyVHlwZSwgY29uZmlnLmNvbnRleHQsIHBpY2tlckNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgcGlja2VyLm9uKCd1cGxvYWRzLXN0YXJ0JywgdGhpcy5oYW5kbGVVcGxvYWRzU3RhcnQpO1xuICAgICAgICBwaWNrZXIub24oJ3VwbG9hZC1wcmV2aWV3LXVwZGF0ZScsIHRoaXMuaGFuZGxlVXBsb2FkUHJldmlld1VwZGF0ZSk7XG4gICAgICAgIHBpY2tlci5vbigndXBsb2FkLXByb2Nlc3NpbmcnLCB0aGlzLmhhbmRsZVVwbG9hZFByb2Nlc3NpbmcpO1xuICAgICAgICBwaWNrZXIub24oJ3VwbG9hZC1zdGF0dXMtdXBkYXRlJywgdGhpcy5oYW5kbGVVcGxvYWRTdGF0dXNVcGRhdGUpO1xuICAgICAgICBwaWNrZXIub24oJ3VwbG9hZC1lcnJvcicsIHRoaXMuaGFuZGxlVXBsb2FkRXJyb3IpO1xuICAgICAgICBwaWNrZXIub24oJ3VwbG9hZC1lbmQnLCB0aGlzLmhhbmRsZVVwbG9hZEVuZCk7XG4gICAgICAgIGlmIChwaWNrZXIgaW5zdGFuY2VvZiBEcm9wem9uZSkge1xuICAgICAgICAgICAgcGlja2VyLm9uKCdkcmFnLWVudGVyJywgdGhpcy5oYW5kbGVEcmFnRW50ZXIpO1xuICAgICAgICAgICAgcGlja2VyLm9uKCdkcmFnLWxlYXZlJywgdGhpcy5oYW5kbGVEcmFnTGVhdmUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwaWNrZXIgaW5zdGFuY2VvZiBEcm9wem9uZSB8fCBwaWNrZXIgaW5zdGFuY2VvZiBDbGlwYm9hcmQpIHtcbiAgICAgICAgICAgIHBpY2tlci5hY3RpdmF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQaWNrZXJGYWNhZGUucHJvdG90eXBlLCBcInR5cGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBpY2tlclR5cGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFBpY2tlckZhY2FkZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBpY2tlciA9IHRoaXMucGlja2VyO1xuICAgICAgICBpZiAoIXBpY2tlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBpY2tlci5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3VwbG9hZHMtc3RhcnQnKTtcbiAgICAgICAgcGlja2VyLnJlbW92ZUFsbExpc3RlbmVycygndXBsb2FkLXByZXZpZXctdXBkYXRlJyk7XG4gICAgICAgIHBpY2tlci5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3VwbG9hZC1zdGF0dXMtdXBkYXRlJyk7XG4gICAgICAgIHBpY2tlci5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3VwbG9hZC1wcm9jZXNzaW5nJyk7XG4gICAgICAgIHBpY2tlci5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3VwbG9hZC1lcnJvcicpO1xuICAgICAgICBwaWNrZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCd1cGxvYWQtZW5kJyk7XG4gICAgICAgIGlmIChwaWNrZXIgaW5zdGFuY2VvZiBEcm9wem9uZSkge1xuICAgICAgICAgICAgcGlja2VyLnJlbW92ZUFsbExpc3RlbmVycygnZHJhZy1lbnRlcicpO1xuICAgICAgICAgICAgcGlja2VyLnJlbW92ZUFsbExpc3RlbmVycygnZHJhZy1sZWF2ZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25TdGFydExpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLm9uRHJhZ0xpc3RlbmVycyA9IFtdO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHBpY2tlciBpbnN0YW5jZW9mIERyb3B6b25lIHx8IHBpY2tlciBpbnN0YW5jZW9mIENsaXBib2FyZCkge1xuICAgICAgICAgICAgICAgIHBpY2tlci5kZWFjdGl2YXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGlja2VyIGluc3RhbmNlb2YgUG9wdXAgfHwgcGlja2VyIGluc3RhbmNlb2YgQnJvd3Nlcikge1xuICAgICAgICAgICAgICAgIHBpY2tlci50ZWFyZG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChleCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvclJlcG9ydGVyLmNhcHR1cmVFeGNlcHRpb24oZXgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQaWNrZXJGYWNhZGUucHJvdG90eXBlLnNldFVwbG9hZFBhcmFtcyA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5waWNrZXIuc2V0VXBsb2FkUGFyYW1zKHBhcmFtcyk7XG4gICAgfTtcbiAgICBQaWNrZXJGYWNhZGUucHJvdG90eXBlLm9uQ2xvc2UgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgdmFyIHBpY2tlciA9IHRoaXMucGlja2VyO1xuICAgICAgICBpZiAocGlja2VyIGluc3RhbmNlb2YgUG9wdXApIHtcbiAgICAgICAgICAgIHBpY2tlci5vbignY2xvc2VkJywgY2IpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBpY2tlci5vZmYoJ2Nsb3NlZCcsIGNiKTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyB9O1xuICAgIH07XG4gICAgUGlja2VyRmFjYWRlLnByb3RvdHlwZS5hY3RpdmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBpY2tlciA9IHRoaXMucGlja2VyO1xuICAgICAgICBpZiAocGlja2VyIGluc3RhbmNlb2YgRHJvcHpvbmUgfHwgcGlja2VyIGluc3RhbmNlb2YgQ2xpcGJvYXJkKSB7XG4gICAgICAgICAgICBwaWNrZXIuYWN0aXZhdGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUGlja2VyRmFjYWRlLnByb3RvdHlwZS5kZWFjdGl2YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGlja2VyID0gdGhpcy5waWNrZXI7XG4gICAgICAgIGlmIChwaWNrZXIgaW5zdGFuY2VvZiBEcm9wem9uZSB8fCBwaWNrZXIgaW5zdGFuY2VvZiBDbGlwYm9hcmQpIHtcbiAgICAgICAgICAgIHBpY2tlci5kZWFjdGl2YXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBpY2tlckZhY2FkZS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucGlja2VyIGluc3RhbmNlb2YgUG9wdXApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5waWNrZXIuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvclJlcG9ydGVyLmNhcHR1cmVFeGNlcHRpb24oZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucGlja2VyIGluc3RhbmNlb2YgQnJvd3Nlcikge1xuICAgICAgICAgICAgdGhpcy5waWNrZXIuYnJvd3NlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBpY2tlckZhY2FkZS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucGlja2VyIGluc3RhbmNlb2YgUG9wdXApIHtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUGlja2VyRmFjYWRlLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiAodGVtcElkKSB7XG4gICAgICAgIGlmICh0aGlzLnBpY2tlciBpbnN0YW5jZW9mIFBvcHVwKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSh0ZW1wSWQpO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZSB8fCBzdGF0ZS5zdGF0dXMgPT09ICdjYW5jZWxsZWQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBpY2tlci5jYW5jZWwodGVtcElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UncmUgZGVsaWJlcmF0ZWx5IGNvbnN1bWluZyBhIGtub3duIE1lZGlhIFBpY2tlciBleGNlcHRpb24sIGFzIGl0IHNlZW1zIHRoYXRcbiAgICAgICAgICAgICAgICAvLyB0aGUgcGlja2VyIGhhcyBwcm9ibGVtcyBjYW5jZWxsaW5nIHVwbG9hZHMgYmVmb3JlIHRoZSBwb3B1cCBwaWNrZXIgaGFzIGJlZW4gc2hvd25cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgYWZ0ZXIgZml4aW5nIGh0dHBzOi8vamlyYS5hdGxhc3NpYW4uY29tL2Jyb3dzZS9GSUwtNDE2MVxuICAgICAgICAgICAgICAgIGlmICghLygocG9wdXBJZnJhbWV8Y2FuY2VsVXBsb2FkKS4qP3VuZGVmaW5lZCl8KHVuZGVmaW5lZC4qPyhwb3B1cElmcmFtZXxjYW5jZWxVcGxvYWQpKS8udGVzdChcIlwiICsgZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlTWFuYWdlci51cGRhdGVTdGF0ZSh0ZW1wSWQsIHtcbiAgICAgICAgICAgICAgICBpZDogdGVtcElkLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2NhbmNlbGxlZCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUGlja2VyRmFjYWRlLnByb3RvdHlwZS51cGxvYWQgPSBmdW5jdGlvbiAodXJsLCBmaWxlTmFtZSkge1xuICAgICAgICBpZiAodGhpcy5waWNrZXIgaW5zdGFuY2VvZiBCaW5hcnlVcGxvYWRlcikge1xuICAgICAgICAgICAgdGhpcy5waWNrZXIudXBsb2FkKHVybCwgZmlsZU5hbWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQaWNrZXJGYWNhZGUucHJvdG90eXBlLm9uTmV3TWVkaWEgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgdGhpcy5vblN0YXJ0TGlzdGVuZXJzLnB1c2goY2IpO1xuICAgIH07XG4gICAgUGlja2VyRmFjYWRlLnByb3RvdHlwZS5vbkRyYWcgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgdGhpcy5vbkRyYWdMaXN0ZW5lcnMucHVzaChjYik7XG4gICAgfTtcbiAgICBQaWNrZXJGYWNhZGUucHJvdG90eXBlLmdlbmVyYXRlVGVtcElkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBcInRlbXBvcmFyeTpcIiArIGlkO1xuICAgIH07XG4gICAgcmV0dXJuIFBpY2tlckZhY2FkZTtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBQaWNrZXJGYWNhZGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waWNrZXItZmFjYWRlLmpzLm1hcFxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL0BhdGxhc2tpdC9jb252ZXJzYXRpb24vbm9kZV9tb2R1bGVzL0BhdGxhc2tpdC9lZGl0b3ItY29yZS9kaXN0L2VzMjAxNS9wbHVnaW5zL21lZGlhL3BpY2tlci1mYWNhZGUuanNcbi8vIG1vZHVsZSBpZCA9IDQwODdcbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4087\n");

/***/ })

});